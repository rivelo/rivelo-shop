<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Додати роботу</title>

<!-- 
	<script type="text/javascript" src="/media/sh/shCore.js"></script>
	<script type="text/javascript" src="/media/sh/shBrushJScript.js"></script>
	<link type="text/css" rel="stylesheet" href="/media/sh/shCore.css"/>
	<link type="text/css" rel="stylesheet" href="/media/sh/shThemeDefault.css"/>
	<script type="text/javascript">
		SyntaxHighlighter.all();
	</script>

	<link rel="stylesheet" type="text/css" href="/media/autocomplete.css">
	<script type="text/javascript" src="/media/jquery-1.3.1.min.js"></script>
	<script type="text/javascript" src="/media/jquery.autocomplete.pack.js"></script>
	<script type="text/javascript" src="/media/jquery.select-autocomplete.js"></script>
 -->	
	<script type="text/javascript" src="/media/jquery.searchabledropdown-1.0.8.min.js"></script>
	
	<link rel="stylesheet" type="text/css" href="/media/autocomplete.css">
	<link rel="stylesheet" href="/media/jquery-ui.min.css">
	<script src="/media/jquery-ui.min.js"></script>
	
	
<style type="text/css">
  span:visited{ text-decoration:none; color:#293d6b; }
  span:hover{ text-decoration:underline; color:#FFF; }
  span {color:#293d6b; 
  		cursor: pointer; 
  		border-radius: 5px;
  		color: #FFF;
  		background-color: #4A4A4A;
  		}
  span.one {background-color: #5cb85c;
  		}
  span.two {background-color: #FF6600;
  		}
  div.box {//border-radius: 5px;
  		   background-color: #bfbfbf;
  		   font-size:200%;
  		   margin: 80px 0px 0px;
  }  		
 		
</style>		
	
<script type="text/javascript">
$(document).ready(function() {

	$("#s_client").val($('#id_client').val());
	//$("#s_client").select();

        $( "#s_client" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                type: "GET",
                url: "/client/lookup",
				data: { query: $("#s_client").val() },
                dataType: "json",
                success: function( data ) {
                        	response( $.map( data, function( item ) {
                            return {
                                label: item.pk + ": [" + item.fields.forumname + "] "+ item.fields.name,
                                value: item.fields.name,
                                idid: item.fields.sale,
                                pk_id: item.pk                                
    							}
                        	}));                                
                            }
                    })
            },
            minLength: 3,
            select: function( event, ui ) {
	            $('#id_client').val(ui.item.pk_id);
            },
            open: function() {
                $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
            },
            close: function() {
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            }
        });



//    $('select.autocomplete').select_autocomplete();
    $("#s_client").focus();
      
//      $("id_work_type").focus();
	$("#id_work_type").searchable();
	
	$("#id_work_type").change(function(){
		$.getJSON("/worktype/price/", {id: $("select#id_work_type").val()}, function(data) {
    		$('#id_price').val(data[0].price);
		});
	});
	$('#id_user').parents("tr").hide();
	//$('#id_user').hide();
	//$('#client_cloud').insertAfter('#id_client');
	
	$('span').click(function(){
    	//$(this).hide();
    	$("#s_client").val($(this).attr('vname'));
    	$('#id_client').val($(this).attr('val'));
    	$('#id_work_type').focus();
    });	
});

</script>

    <h1>Рахунок на виконані роботи</h1>
    <div style="float: left;"> 
    <form action="" method="POST" enctype="multipart/form-data">
        <table>
        	<input id="s_client" style="width: 550px;" />
            {{ form.as_table }}  
<!--             {{ form.as_ul }} -->
        </table>
        <p><input type="submit" value="Save"></p>
    </form>
	</div>
	
<div style="float: none;" id="client_cloud">
{% for client in clients_list %}
{% if client.num_inv >= 7 %}
<span class="two" val='{{client.client__id}}' vname="{{client.client__name}}" sale="{{client.client__sale}}" style="font-size:200%;"> {{client.client__name}} ({{client.num_inv}}) </span>,
{% endif %}
{% if client.num_inv >= 3 and client.num_inv < 7 %}
<span class="one" val='{{client.client__id}}' vname="{{client.client__name}}" sale="{{client.client__sale}}" style="font-size:150%;"> {{client.client__name}} ({{client.num_inv}}) </span>,
{% endif %}
{% if client.num_inv < 3 %} 
<span val='{{client.client__id}}' vname="{{client.client__name}}" sale="{{client.client__sale}}" style="font-size:100%;"> {{client.client__name}} ({{client.num_inv}}) </span>,
{% endif %}
{% endfor %}    
</div>


